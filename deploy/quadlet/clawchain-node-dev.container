# ClawChain Node - Development Mode
# Managed by Podman Quadlet (systemd)
#
# For local testing with temporary storage and unsafe RPC methods
#
# Install: Copy to ~/.config/containers/systemd/
# Reload: systemctl --user daemon-reload
# Start: systemctl --user start clawchain-node-dev
# Status: systemctl --user status clawchain-node-dev

[Unit]
Description=ClawChain Substrate Node (Development)
Documentation=https://github.com/clawinfra/claw-chain
After=network-online.target
Wants=network-online.target

[Container]
Image=localhost/clawchain-node:latest
ContainerName=clawchain-node-dev

# Port mappings (different ports to avoid conflict with production)
PublishPort=9945:9944
PublishPort=9616:9615
PublishPort=30334:30333

# No persistent volume - uses --tmp for ephemeral storage

# Environment variables
Environment=RUST_LOG=debug
Environment=RUST_BACKTRACE=full

# Development mode arguments
Exec=--dev \
     --tmp \
     --name "ClawChain-Dev" \
     --rpc-external \
     --rpc-cors all \
     --rpc-methods unsafe \
     --rpc-port 9944 \
     --prometheus-external \
     --prometheus-port 9615 \
     --port 30333

# Health check
HealthCmd=curl -sf http://localhost:9944/health || exit 1
HealthInterval=30s
HealthTimeout=10s

[Service]
Restart=on-failure
RestartSec=5
TimeoutStartSec=120

[Install]
WantedBy=default.target
